
const STOMP = {
    client: null,
    connect: function(id, role){
        const socket = new SockJS('/ws');
        STOMP.client = Stomp.over(socket);
        STOMP.client.connect({id: `${id}`}, function(frame) {
            STOMP.client.subscribe(`/user/${role}/queue/notify`, function(messageOutput) {
                const gritter = JSON.parse(messageOutput.body)
                alarm(gritter.title, gritter.content)
                //showMessage(JSON.parse(messageOutput.body))
            });
        });
    },
    disconnect: function(){
        if(STOMP.client != null) {
            STOMP.client.disconnect();
        }
    }
}