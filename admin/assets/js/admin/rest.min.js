
const rest = {
    /**
    * @param mType: body | form
    */
    post: function(mUrl, mData, mType="body"){
        if(mType == "body"){
            return $.ajax({
                "url": mUrl,
                "method": "POST",
                "cache": false,
                "timeout": 0,
                "headers": {"Content-Type": "application/json"},
                "data": JSON.stringify(mData)
            })
        }else{
            return $.ajax({
                "type": "POST",
                "data": mData,
                "url": mUrl,
                "enctype": 'multipart/form-data',
                "processData": false,
                "contentType": false,
                "cache": false
            })
        }
    },
    get: function(mUrl, mData){
        return $.ajax({
            "type": "GET",
            "url": mUrl,
            "data": mData,
            "contentType": "application/json charset=utf-8",
        })
    }
}

const API = {
    FORM_CATE: {
        list: async function(params){
            $("#loader").removeClass("loaded")
            const api = `api.php?c=formCate&m=getCateByForm`
            const res = await $.when(rest.get(api, params))
            $("#loader").addClass("loaded")
            return res
        },
        save: async function(params){
            $("#loader").removeClass("loaded")
            const api = `api.php?c=formCate&m=save`
            const res = await $.when(rest.post(api, params, 'form'))
            $("#loader").addClass("loaded")
            return res
        }
    },
    FORM_STEP: {
        info: async function(params){
            $("#loader").removeClass("loaded")
            const api = `api.php?c=formStep&m=info`
            const res = await $.when(rest.get(api, params))
            $("#loader").addClass("loaded")
            return res
        },
        save: async function(params){
            $("#loader").removeClass("loaded")
            const api = `api.php?c=formStep&m=save`
            const res = await $.when(rest.post(api, params, 'form'))
            $("#loader").addClass("loaded")
            return res
        }
    },
    MEDIA: {
        upload: async function(params){
            $("#loader").removeClass("loaded")
            const api = `api.php?c=media&m=upload`
            const res = await $.when(rest.post(api, params, 'form'))
            $("#loader").addClass("loaded")
            return res
        }
    }
}